<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>cavas绘画</title>
</head>
<body>
<canvas id="canvas" width="1000" height="800">
不支持canvas  <!-- 浏览器不支持的话 -->
</canvas>
<br/>
<button style="width:80px;background-color:yellow;" onclick='linecolor="yellow";'>YELLOW</button>
<button style="width:80px ;background-color:red;" onclick='linecolor="red";'>RED</button>
<button style="width:80px ;background-color:blue;" onclick='linecolor="blue";'>BLUE</button>
<button style="width:80px ;background-color:green;" onclick='linecolor="green";'>GREEN</button>
<button style="width:80px ;background-color:white;" onclick='linecolor="white";'>WHITE</button>
<button style="width:80px ;background-color:black;" onclick='linecolor="black";'>BLACK</button>
<br/>
  
<button style="width: 80px;background-color: white;" onclick="linw=4;">4PX</button>
<button style="width: 80px;background-color: white;" onclick="linw=8;">8PX</button>
<button style="width: 80px;background-color: white;" onclick="linw=16;">16PX</button>
<br/>
  
<button style="width: 80px;background-color: white;" onclick="copyimage();">EXPORT</button>
  
<br/>
<img src="" id="image_png" width="1000px" height="800px">
<br/>
  
<script type="text/javascript">
  var canvas = document.getElementById('canvas'); //
  var ctx = canvas.getContext("2d"); 
  
  var fillStyle = "black";
  ctx.fillRect(0,0,1000,800);
  var onoff = false; //
  var oldx = -10;
  var oldy = -10;
  var linecolor = "white";
  var linw = 4;
  canvas.addEventListener("mousemove",draw,true); //
  canvas.addEventListener("mousedown",down,false); //
  canvas.addEventListener("mouseup",up,false); //
  function down(event){
    onoff = true;
    oldx = event.pageX - 10;
    oldy = event.pageY - 10;
  }
  function up(){
    onoff = false;
  }
  function draw(event){
    if (onoff==true) {
      var newx = event.pageX - 10;
      var newy = event.pageY - 10
      ctx.beginPath();
      ctx.moveTo(oldx,oldy);
      ctx.lineTo(newx,newy);
      ctx.strokeStyle = linecolor;
      ctx.lineWidth = linw;
      ctx.lineCap = "round";
      ctx.stroke();
      oldx = newx;
      oldy = newy;
    }
  }
  function copyimage(event)
  {
    var img_png_src = canvas.toDataURL("image/png");
    document.getElementById("image_png").src = img_png_src;
  }
    
  </script> 
</body>
</html>